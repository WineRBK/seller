import config from"../../config.js";import{UserObject}from"./kycAPI.js";import{submitPersonal}from"./kycAPI.js";const inputID=document.querySelector("#el-id-8254-15").parentElement.parentElement.parentElement,IDPopper=document.querySelector("#el-id-8254-8"),licenseNumber=document.querySelector("#el-id-8254-16").parentElement.parentElement.parentElement,certificate=document.querySelector("#el-id-8254-17").parentElement.parentElement.parentElement,certificatePopper=document.querySelector("#el-id-9817-12"),photoFront=document.querySelector('[aria-labelledby="el-id-8254-13"]'),frontItem=photoFront.querySelector(".certificate-item"),photoFrontLoad=photoFront.querySelector(".certificate-wrap").firstElementChild,photoBack=document.querySelector('[aria-labelledby="el-id-8254-13"]').nextElementSibling,backItem=photoBack.querySelector(".certificate-item"),photoBackLoad=photoBack.querySelector(".certificate-wrap").firstElementChild,submit=document.querySelector("#submitPersonal"),hint2=document.querySelector("#hint2"),hint3=document.querySelector("#hint3"),modal=document.querySelector('[aria-describedby="el-id-4693-5"]').parentElement;function redirect(e){e.querySelector("button").addEventListener("click",e=>{window.location.href=config.redirectURL}),sleep(config.timeUntilRedirect).then(()=>{window.location.href=config.redirectURL})}hintCardAnimate(hint2),hintAnimate(hint3,"The valid expiration date of the certificate must be more than one month"),inputID.addEventListener("click",e=>{selectView(IDPopper,inputID,460,80),togglePopup(IDPopper,inputID)}),document.addEventListener("click",e=>{handleClickOutside(IDPopper,inputID,e),handleClickOutside(certificatePopper,certificate,e)}),IDPopper.querySelectorAll("li").forEach(e=>{setupCustomSelectHover(IDPopper.querySelectorAll("li"),e),setupCustomSelectClick(IDPopper.querySelectorAll("li"),e,inputID,IDPopper),e.addEventListener("click",e=>{animationLeave(inputID.parentElement)})}),licenseNumber.querySelector("#el-id-8254-16").addEventListener("focus",e=>{e.target.parentElement.classList.add("is-focus")}),licenseNumber.querySelector("#el-id-8254-16").addEventListener("blur",e=>{e.target.parentElement.classList.remove("is-focus"),e.target.closest(".is-required")&&0==e.target.value.length&&animationActive(e.target.parentElement.parentElement)}),licenseNumber.querySelector("#el-id-8254-16").addEventListener("input",e=>{e.target.closest(".is-required")&&0==e.target.value.length&&animationActive(e.target.parentElement.parentElement),e.target.closest(".is-required")&&0!==e.target.value.length&&animationLeave(e.target.parentElement.parentElement)}),certificate.addEventListener("click",e=>{if("svg"===e.target.tagName||e.target.closest("svg"))return document.querySelector("#el-id-8254-17").value="",certificate.querySelector(".el-icon.el-input__icon.clear-icon").style.display="none",animationActive(document.querySelector("#el-id-8254-17").parentElement.parentElement),currentYearCertificate=new Date,currentMonthCertificate=currentDateCertificate.getMonth(),currentYear=currentDateCertificate.getFullYear(),generateCalendar(currentDateCertificate.getFullYear(),currentDateCertificate.getMonth()),selectView(certificatePopper,certificate,324,343),void togglePopupCalendar(certificatePopper,certificate);selectViewCalendar(certificatePopper,certificate,324,343),togglePopupCalendar(certificatePopper,certificate)}),certificate.firstElementChild.firstElementChild.addEventListener("mouseenter",()=>{""!=certificate.querySelector("#el-id-8254-17").value&&(certificate.querySelector(".el-icon.el-input__icon.clear-icon").style.display=null)}),certificate.firstElementChild.firstElementChild.addEventListener("mouseleave",()=>{certificate.querySelector(".el-icon.el-input__icon.clear-icon").style.display="none"}),calendarAPI(certificatePopper,certificate.querySelector("input"),function(e){const t=new Date;return e<new Date(t.getFullYear(),t.getMonth()+1,t.getDate())}),photoFrontLoad.addEventListener("click",function(){"true"!==photoFrontLoad.querySelector("input").getAttribute("disabled")&&photoFrontLoad.querySelector("input").click()}),photoFrontLoad.querySelector("input").addEventListener("input",function(e){handleImageUpload(e,photoFrontLoad.querySelector(".el-image__wrapper")),e.target.setAttribute("disabled","true");let t=document.createElement("div");t.setAttribute("class","absolute w-full h-[33px] bottom-0 flex justify-evenly items-center bg-[#333333] text-[#ffffff] bg-opacity-80"),t.innerHTML='<i data-v-6c5efee3="" class="el-icon"><svg data-v-6c5efee3="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"></path></svg></i>',frontItem.lastElementChild.remove(),frontItem.appendChild(t),t.setAttribute("data-img","delete")}),photoFrontLoad.addEventListener("click",e=>{const t=photoFrontLoad.querySelector('[data-img="delete"]');if(t&&t.contains(e.target)){photoFrontLoad.querySelector("img").remove();const e=document.createElement("div");e.setAttribute("class","absolute w-full h-full flex flex-col gap-[8px] justify-center items-center"),e.innerHTML='<div data-v-6c5efee3="" class="absolute w-full h-full flex flex-col gap-[8px] justify-center items-center">\n      <i data-v-6c5efee3="" class="el-icon" style="font-size: 32px;"><svg data-v-6c5efee3="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">\n            <path fill="currentColor" d="M352 480h320a32 32 0 1 1 0 64H352a32 32 0 0 1 0-64z">\n            </path>\n            <path fill="currentColor" d="M480 672V352a32 32 0 1 1 64 0v320a32 32 0 0 1-64 0z">\n            </path>\n            <path fill="currentColor" d="M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z">\n            </path>\n         </svg></i><span data-v-6c5efee3="">The reverse side of the\n         ID photo</span>\n   </div>',frontItem.appendChild(e),t.remove(),photoFrontLoad.querySelector("input").removeAttribute("disabled"),photoFrontLoad.querySelector("input").value=null}}),photoBackLoad.addEventListener("click",function(){"true"!==photoBackLoad.querySelector("input").getAttribute("disabled")&&photoBackLoad.querySelector("input").click()}),photoBackLoad.querySelector("input").addEventListener("input",function(e){handleImageUpload(e,photoBackLoad.querySelector(".el-image__wrapper")),e.target.setAttribute("disabled","true");let t=document.createElement("div");t.setAttribute("class","absolute w-full h-[33px] bottom-0 flex justify-evenly items-center bg-[#333333] text-[#ffffff] bg-opacity-80"),t.innerHTML='<i data-v-6c5efee3="" class="el-icon"><svg data-v-6c5efee3="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"></path></svg></i>',backItem.lastElementChild.remove(),backItem.appendChild(t),t.setAttribute("data-img","delete")}),photoBackLoad.addEventListener("click",e=>{const t=photoBackLoad.querySelector('[data-img="delete"]');if(t&&t.contains(e.target)){photoBackLoad.querySelector("img").remove();const e=document.createElement("div");e.setAttribute("class","absolute w-full h-full flex flex-col gap-[8px] justify-center items-center"),e.innerHTML='<div data-v-6c5efee3="" class="absolute w-full h-full flex flex-col gap-[8px] justify-center items-center">\n      <i data-v-6c5efee3="" class="el-icon" style="font-size: 32px;"><svg data-v-6c5efee3="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">\n            <path fill="currentColor" d="M352 480h320a32 32 0 1 1 0 64H352a32 32 0 0 1 0-64z">\n            </path>\n            <path fill="currentColor" d="M480 672V352a32 32 0 1 1 64 0v320a32 32 0 0 1-64 0z">\n            </path>\n            <path fill="currentColor" d="M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z">\n            </path>\n         </svg></i><span data-v-6c5efee3="">The reverse side of the\n         ID photo</span>\n   </div>',backItem.appendChild(e),t.remove(),photoBackLoad.querySelector("input").removeAttribute("disabled"),photoBackLoad.querySelector("input").value=null}}),submit.addEventListener("click",e=>{console.log(modal),0!==inputID.querySelector("input").value.length&&0!==licenseNumber.querySelector("input").value.length&&0!==certificate.querySelector("input").value.length&&null!==photoFront.querySelector(".el-image__preview")&&null!==photoBack.querySelector(".el-image__preview")?(UserObject.id_type=inputID.querySelector("input").value,UserObject.license_number=licenseNumber.querySelector("input").value,UserObject.certificate_validity_period=certificate.querySelector("input").value,UserObject.id_photo_front=photoFront.querySelector(".el-image__preview").src,UserObject.id_photo_reverse=photoBack.querySelector(".el-image__preview").src,submitPersonal(),modal.style.display=null,redirect(modal)):(0==inputID.querySelector("input").value.length&&animationActive(inputID.parentElement),0==licenseNumber.querySelector("input").value.length&&animationActive(licenseNumber.querySelector("input").parentElement.parentElement),0==certificate.querySelector("input").value.length&&animationActive(certificate.querySelector("input").parentElement.parentElement),null==photoFront.querySelector(".el-image__preview")&&animationActive(photoFront.querySelector(".el-upload.el-upload--text").parentElement.parentElement),null==photoBack.querySelector(".el-image__preview")&&animationActive(photoBack.querySelector(".el-upload.el-upload--text").parentElement.parentElement))});