const wrapper=document.querySelector(".input-cover"),numBoxes=wrapper.querySelectorAll(".input-box");console.log(numBoxes);const inputHidden=document.querySelectorAll(".input-hidden");console.log(inputHidden);const verify=document.querySelector(".verify-input-code"),goback=document.querySelector(".goback.fa"),buttons=document.querySelectorAll("#go"),userEmail="",NUM_REGEXP=/[0-9]/;function isNumberValid(e){return NUM_REGEXP.test(e)}function sleep(e){return new Promise(t=>setTimeout(t,e))}const KEYBOARDS={backspace:8,arrowLeft:37,arrowRight:39};function activeMinus(){numBoxes[activeBox].classList.remove("is-focus"),numBoxes[activeBox-=1].classList.add("is-focus")}function activePlus(){numBoxes[activeBox].classList.remove("is-focus"),numBoxes[activeBox+=1].classList.add("is-focus")}let activeBox;function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function gauth_code(e){var t=getCookie("unique_id"),o=JSON.stringify({unique_id:t,code:e});console.log(o),$.ajax({url:"https://api.imetastore.com/send_gauth_code/",type:"POST",data:o,timeout:5e4,dataType:"json",contentType:"application/json",accept:"application/json",success:function(e){if("success"===e.status){document.cookie=`username=${e.nickname}`;const t=new URLSearchParams(window.location.search);"/kyc-authentication"==t.get("redirect")?window.location.href=t.get("redirect"):window.location.href=" https://seller.imetastore.io/login"}else"failed"===e.status?(window.location.href="https://seller.imetastore.io/product/my",buttons[1].firstElementChild.style.display="none"):"timeout"===e.status?window.location.href=window.location.href="https://seller.imetastore.io/login":"gauth_error"===e.status&&(document.querySelector('button[type="gauth_code"]').firstElementChild.remove(),document.querySelector('button[type="gauth_code"]').classList.remove("disabled"),document.querySelector('button[type="gauth_code"]').removeAttribute("disabled"),errorActive("google secondary verification failed"))}})}function errorActive(e){console.log(e),document.body.insertAdjacentHTML("beforeend",`\n      <div id="message_1" class="el-message el-message--error el-message-fade-enter-from" role="alert" style="top: 16px; z-index: 2002;">\x3c!--v-if--\x3e<i class="el-icon el-message__icon el-message-icon--error"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path fill="currentColor" d="M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"></path></svg></i><p class="el-message__content">${e}</p>\x3c!--v-if--\x3e</div>\n      `),sleep(1).then(()=>{document.querySelector("#message_1").classList.remove("el-message-fade-enter-from")}),sleep(3e3).then(()=>{document.querySelector("#message_1").classList.add("el-message-fade-enter-from")}),sleep(3500).then(()=>{document.querySelector("#message_1").remove()})}verify.addEventListener("click",e=>{document.querySelector(".ver-input").style.display=null,document.querySelector(".ver-code").style.display="none"}),goback.addEventListener("click",e=>{document.querySelector(".ver-input").style.display="none",document.querySelector(".ver-code").style.display=null}),inputHidden.forEach(e=>{e.addEventListener("keyup",e=>{console.log(activeBox),isNumberValid(e.key)&&(numBoxes[activeBox].firstElementChild.textContent=e.key,5!=activeBox&&activePlus())})}),inputHidden.forEach(e=>{e.addEventListener("keydown",e=>{if(8==e.keyCode)return""!=numBoxes[activeBox].firstElementChild.textContent?(numBoxes[activeBox].firstElementChild.textContent="",void(0!=activeBox&&activeMinus())):0!=activeBox?void activeMinus():void 0})}),inputHidden.forEach((e,t)=>{e.addEventListener("click",e=>{void 0!==activeBox&&numBoxes[activeBox].classList.remove("is-focus"),numBoxes[t].classList.add("is-focus"),activeBox=t})}),inputHidden.forEach(e=>{e.addEventListener("paste",e=>{let t=e.clipboardData.getData("text");isNumberValid(t=t.split(""))&&numBoxes.forEach((e,o)=>{e.firstElementChild.textContent=`${t[o]}`})})}),document.addEventListener("click",e=>{e.target.classList.contains("input-box")||e.target.classList.contains("input-hidden")||void 0!==activeBox&&(numBoxes[activeBox].classList.remove("is-focus"),activeBox=void 0)}),buttons.forEach(e=>{e.addEventListener("click",t=>{if(e.firstElementChild.style.display=null,"email_code"==e.getAttribute("type")){let e=[];for(let t=0;t<6;t++)e.push(numBoxes[t].value);e=e.join(""),console.log(e),email_code(e)}else if("gauth_code"==e.getAttribute("type")){let t=[];for(let e=0;e<6;e++)t.push(numBoxes[e].firstElementChild.textContent);t=t.join(""),console.log(t),e.classList.contains("disabled")||(e.insertAdjacentHTML("afterbegin",'\n        <i class="el-icon is-loading">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">\n          <path fill="currentColor" d="M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z">\n          </path>\n        </svg>\n      </i>\n        '),e.classList.add("disabled"),e.disabled=!0,gauth_code(t))}else"gauth_sendCode"==e.getAttribute("type")&&(e.insertAdjacentHTML("afterbegin",'\n      <i class="el-icon is-loading">\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">\n        <path fill="currentColor" d="M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z">\n        </path>\n      </svg>\n    </i>\n      '),e.classList.add("disabled"),e.disabled=!0)})});